<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script>var module = {}</script>
    <script src="sweeper.js"></script>
    <style>
tr {
  height: 12px;
}
td {
  width: 12px;
}
.hidden {
  background-color: gray;
}
.flagged {
  background-color: red;
}
.questioned {
  background-color: yellow;
}
    </style>
    <script>
var Game = module.exports;

$(function() {

  var g = new Game();

  var cells = d3.select("#game")
    .append("table")
    .selectAll("tr")
    .data(g.board.matrix)
  .enter()
    .append("tr")
    .selectAll("td")
    .data(function(d) { return d; })
  .enter()
    .append("td");

  cells.on("click", function(d) {
      d3.event.preventDefault();
      if ( d3.event.shiftKey || d3.event.altKey || d3.event.ctrlKey ) {
        d.toggleFlag();
      } else {
        d.reveal();
      }
      update();
    });

  function update() {
    cells.text(function(d) { return d.toString(); })
      .attr("class", function(d) { console.log(d);return d.cls(); });
  }

  update();
});
    </script>
  </head>
  <body>
    <div id="game">
  </body>
</html>
